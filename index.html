<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á–µ–±–∞ –Ω–∞ 5+ | –¢–≤–æ–π –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(function(registration) {
                    console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration);
                })
                .catch(function(error) {
                    console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                });
        }
    </script>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –∫–ª—é—á–∞ -->
    <div id="keyScreen" class="screen active">
        <div class="background-animation"></div>
        <div class="container">
            <div class="logo">
                <h1>üéì –£—á–µ–±–∞–ù–∞5+</h1>
            </div>
            
            <div class="promo-card">
                <div class="promo-header">
                    <h2>–•–æ—á–µ—à—å –ø–æ–≤—ã—Å–∏—Ç—å —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å?</h2>
                    <div class="badge">–ù–û–í–´–ú –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú 1 –ö–õ–Æ–ß –ë–ï–°–ü–õ–ê–¢–ù–û</div>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <span>‚úÖ</span> –†–µ—à–∞—Ç–µ–ª—å —É—Ä–∞–≤–Ω–µ–Ω–∏–π
                    </div>
                    <div class="feature">
                        <span>‚úÖ</span> –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫
                    </div>
                    <div class="feature">
                        <span>‚úÖ</span> 5-–±–∞–ª—å–Ω–∞—è –∏ 10-–±–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º—ã
                    </div>
                    <div class="feature">
                        <span>‚úÖ</span> –õ–∏—á–Ω—ã–µ –ø–∞–º—è—Ç–∫–∏
                    </div>
                    <div class="feature">
                        <span>‚úÖ</span> –†–µ—à–µ–Ω–∏–µ —Å—Ç–æ–ª–±–∏–∫–æ–º
                    </div>
                    <div class="feature coming-soon">
                        <span>üöÄ</span> –°–ö–û–†–û: –ì–î–ó –û–§–§–õ–ê–ô–ù!
                    </div>
                </div>

                <div class="key-input-section">
                    <input type="text" id="keyInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á (—Ñ–æ—Ä–º–∞—Ç: SHK-XXXX-XXXX)" class="key-input">
                    <button onclick="checkKey()" class="activate-btn">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ –î–û–°–¢–£–ü</button>
                    <p id="keyMessage" class="message"></p>
                </div>

                <div class="contacts">
                    <p>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è:</p>
                    <div class="contact-links">
                        <a href="https://t.me/west_next" class="tg-link" target="_blank">
                            üì± Telegram: @west_next
                        </a>
                        <a href="https://wa.me/79695356936" class="wa-link" target="_blank">
                            üí¨ WhatsApp: +7 (969) 535-69-36
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="mainMenu" class="screen">
        <header class="header">
            <div class="header-content">
                <h1>üéì –£—á–µ–±–∞–ù–∞5+</h1>
                <nav class="nav-menu">
                    <button onclick="showSection('solver')" class="nav-btn">–†–µ—à–∞—Ç–µ–ª—å</button>
                    <button onclick="showSection('mathOperations')" class="nav-btn">–°—Ç–æ–ª–±–∏–∫–æ–º</button>
                    <button onclick="showSection('diary')" class="nav-btn">–î–Ω–µ–≤–Ω–∏–∫</button>
                    <button onclick="showSection('notes')" class="nav-btn">–ü–∞–º—è—Ç–∫–∏</button>
                    <button onclick="logout()" class="nav-btn logout">–í—ã–π—Ç–∏</button>
                </nav>
            </div>
        </header>

        <div class="main-content">
            <!-- –†–µ—à–∞—Ç–µ–ª—å —É—Ä–∞–≤–Ω–µ–Ω–∏–π -->
            <div id="solver" class="section active">
                <div class="section-card">
                    <h2>üßÆ –†–µ—à–∞—Ç–µ–ª—å —É—Ä–∞–≤–Ω–µ–Ω–∏–π</h2>
                    <p>–†–µ—à–∞–π—Ç–µ –ª—é–±—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ!</p>
                    
                    <div class="solver-input">
                        <input type="text" id="equationInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 2x + 5 = 13)">
                        <button onclick="solveEquation()">–†–µ—à–∏—Ç—å</button>
                    </div>
                    
                    <div id="solutionResult" class="result"></div>
                </div>
            </div>

            <!-- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
            <div id="mathOperations" class="section">
                <div class="section-card">
                    <h2>‚ûó –†–µ—à–µ–Ω–∏–µ —Å—Ç–æ–ª–±–∏–∫–æ–º</h2>
                    <p>–£–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ –∏ –¥–µ–ª–µ–Ω–∏–µ —Å –æ—Å—Ç–∞—Ç–∫–æ–º</p>
                    
                    <div class="math-controls">
                        <div class="operation-selector">
                            <select id="operationType">
                                <option value="multiplication">–£–º–Ω–æ–∂–µ–Ω–∏–µ</option>
                                <option value="division">–î–µ–ª–µ–Ω–∏–µ</option>
                                <option value="divisionWithRemainder">–î–µ–ª–µ–Ω–∏–µ —Å –æ—Å—Ç–∞—Ç–∫–æ–º</option>
                            </select>
                        </div>
                        
                        <div class="number-inputs">
                            <input type="number" id="number1" placeholder="–ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ">
                            <input type="number" id="number2" placeholder="–í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ">
                            <button onclick="solveMathOperation()">–†–µ—à–∏—Ç—å</button>
                        </div>
                    </div>
                    
                    <div id="mathResult" class="result"></div>
                </div>
            </div>

            <!-- –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ -->
            <div id="diary" class="section">
                <div class="section-card">
                    <h2>üìä –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h2>
                    
                    <div class="diary-controls">
                        <select id="gradingSystem" onchange="changeGradingSystem()">
                            <option value="5">5-–±–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</option>
                            <option value="10">10-–±–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</option>
                        </select>
                        
                        <div class="subject-input">
                            <input type="text" id="subjectName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞">
                            <input type="number" id="gradeInput" placeholder="–û—Ü–µ–Ω–∫–∞" min="1" max="5">
                            <button onclick="addGrade()">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>
                    
                    <div id="gradesList" class="grades-list"></div>
                    <div id="averageGrade" class="average-grade"></div>
                </div>
            </div>

            <!-- –ü–∞–º—è—Ç–∫–∏ -->
            <div id="notes" class="section">
                <div class="section-card">
                    <h2>üìù –õ–∏—á–Ω—ã–µ –ø–∞–º—è—Ç–∫–∏</h2>
                    
                    <div class="notes-input">
                        <textarea id="noteText" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É –ø–∞–º—è—Ç–∫—É..."></textarea>
                        <button onclick="addNote()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                    
                    <div id="notesList" class="notes-list"></div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>üöÄ <strong>–°–ö–û–†–û –ë–£–î–ï–¢ –ì–î–ó –û–§–§–õ–ê–ô–ù!</strong></p>
            <p>–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ—Ñ–ª–∞–π–Ω</p>
        </footer>
    </div>

    <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
        function checkFunctions() {
            const requiredFunctions = [
                'checkKey', 'showMainMenu', 'logout', 'showSection', 
                'solveEquation', 'solveMathOperation', 'changeGradingSystem',
                'addGrade', 'addNote', 'loadDiary', 'loadNotes'
            ];
            
            for (let funcName of requiredFunctions) {
                if (typeof window[funcName] === 'undefined') {
                    console.error('–§—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', funcName);
                    return false;
                }
            }
            return true;
        }

        // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
        async function loadAllScripts() {
            try {
                await loadScript('script.js');
                await loadScript('equation-solver.js');
                await loadScript('math-operations.js');
                
                if (checkFunctions()) {
                    console.log('–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ');
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                    if (typeof initApp === 'function') {
                        initApp();
                    }
                } else {
                    console.error('–ù–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                    showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤:', error);
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
            }
        }

        function showError(message) {
            const keyScreen = document.getElementById('keyScreen');
            const existingError = document.querySelector('.load-error');
            if (existingError) existingError.remove();
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'load-error';
            errorDiv.innerHTML = `
                <div style="background: #fed7d7; color: #c53030; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center;">
                    <strong>‚ö†Ô∏è ${message}</strong><br>
                    <small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</small>
                </div>
            `;
            keyScreen.querySelector('.container').insertBefore(errorDiv, keyScreen.querySelector('.promo-card'));
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤
        loadAllScripts();
    </script>
</body>
</html>
